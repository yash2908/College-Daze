if(null==puzzleType)var puzzleType="Sudoku";function handleSearch(){var e=$("#volumeNumber").val(),a=$("#bookNumber").val(),n=$("#puzzleNumber").val(),t=$("#kind").val();return window.location.href="?kind="+t+"&volumeNumber="+e+"&bookNumber="+a+"&puzzleNumber="+n,!1}var gInitState=!0;function setupNavDialog(e){1<maxVolume&&gInitState&&$("input#volumeNumber").TouchSpin({min:1,max:maxVolume,initval:volumeNumber});var a=100;if("function"==typeof getMaxBooks&&(a=getMaxBooks(e)),gInitState)$("input#bookNumber").TouchSpin({min:1,max:a,initval:n});else{var n=Math.max(a,$("#bookNumber").val());$("input#bookNumber").trigger("touchspin.updatesettings",{max:a,initval:n})}var t=8;if("function"==typeof getMaxPuzzlesPerBook&&(t=getMaxPuzzlesPerBook(e)),gInitState)$("input#puzzleNumber").TouchSpin({min:1,max:t,initval:o});else{var o=Math.max(t,$("input#puzzleNumber").val());$("input#puzzleNumber").trigger("touchspin.updatesettings",{max:t,initval:o})}gInitState&&$("#myNavigation").draggable({handle:".modal-header"}),gInitState=!1}function launchNavigation(){return $("select#kind").val(pkind),1<maxVolume&&$("input#volumeNumber").val(volumeNumber),$("input#bookNumber").val(bookNumber),$("input#puzzleNumber").val(puzzleNumber),setupNavDialog(pkind),$(document).off("keydown"),$("#myNavigation").modal({}),$("#myNavigation").on("hidden.bs.modal",function(e){$(document).on("keydown",getKey)}),$("#myNavigationForm").submit(handleSearch),$("#search-variety").off("click"),$("#search-variety").on("click",function(){return!(window.location.href="/tablet/")}),$("#search-submit").off("click"),$("#search-submit").on("click",handleSearch),$("select#kind").off("change"),$("select#kind").on("change",function(){setupNavDialog($(this).val())}),!1}function gotoNextPuzzle(){return window.location.href=nextPuz,!1}function gotoPrevPuzzle(){return window.location.href=prevPuz,!1}function killPuzzleMessage(){$("#ballooncontainer").fadeOut("slow",function(){$(this).hide()})}function puzzleMessage(e,a){var n=e.join("<br>");$("#ballooncontainer").html(n),$("#ballooncontainer").fadeIn("slow"),$("#ballooncontainer").off("click");var t=2e3+2e3*e.length;if(null!=a&&(t=1e3*a),-1!=a)var o=setTimeout(function(){killPuzzleMessage()},t);$("#ballooncontainer").on("click",function(e){gIsDragging=!1,clearTimeout(o),killPuzzleMessage()})}if($.cookie("puzzle_prefs")){var prefs=$.parseJSON($.cookie("puzzle_prefs"));for(var key in prefs)puzzlePrefs[key]=prefs[key]}function launchSettings(){for(var e in puzzlePrefs){$("#prefs-"+e).bootstrapToggle(puzzlePrefs[e]?"on":"off")}return $("#mySettings").draggable({handle:".modal-header"}),$(document).off("keydown"),$("#mySettings").modal({}),$(".prefs-toggle").change(function(){var e=$(this).data("prefs"),a=$(this).prop("checked");puzzlePrefs[e]=a,refreshCanvas(),$.cookie("puzzle_prefs",JSON.stringify(puzzlePrefs),{expires:7})}),$("#mySettings").on("hidden.bs.modal",function(e){$(document).on("keydown",getKey)}),!1}var gCalcAnswer=0,gCalcOp=" ",gCalcStack=0;function setAnswer(e){$("#calc-answer").html(e+'<span id="op-feedback">'+gCalcOp+"</span>")}function launchCalculator(){$("#myCalculator").draggable({handle:".modal-header"}),$("#myCalculator").modal({}),gCalcStack=gCalcAnswer=0,gCalcOp=" ",$(".calc-btn").off("click"),$(".calc-btn").on("click",function(e){var a=$(this).data("calc");switch(""+a){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":setAnswer(gCalcAnswer=10*gCalcAnswer+parseInt(a));break;case"+":case"-":gCalcStack=gCalcAnswer="-"==gCalcOp?gCalcStack-gCalcAnswer:gCalcStack+gCalcAnswer,gCalcOp=a,gCalcAnswer=0,setAnswer(gCalcStack);break;case"=":gCalcStack=gCalcAnswer="-"==gCalcOp?gCalcStack-gCalcAnswer:gCalcStack+gCalcAnswer,gCalcAnswer=0,gCalcOp=" ",setAnswer(gCalcStack);break;case"C":gCalcStack=gCalcAnswer=0,gCalcOp=" ",setAnswer(gCalcAnswer);break;default:console.log("Unknown input:"+a)}})}function supports_canvas(){return!!document.createElement("canvas").getContext}function supports_canvas_text(){return!!supports_canvas()&&"function"==typeof document.createElement("canvas").getContext("2d").fillText}function readableElapsed(e){var a="",n=1;n=86400<e?(a="day",86400):3600<e?(a="hour",3600):60<e?(a="minute",60):(a="second",1);var t=Math.floor(e/n);return t+" "+a+(1!=t?"s":"")+" elapsed"}function SuccessAnimationFrame(){var e=(new Date).getTime();doSuccessAnimation&&(e-doSuccessAnimationTS<doSuccessDuration?setTimeout("SuccessAnimationFrame();",100):doSuccessAnimation=!1),refreshCanvas()}function SuccessLog(){var e="https://krazydad.com/img/kpuzzlesuccess.gif?id="+puzzleID+"&r="+Math.floor(8388607*Math.random());(new Image).src=e}var donateLink="https://www.paypal.com/cgi-bin/webscr?cmd=_donations&business=dad%40krazydad%2ecom&item_name=KrazyDad+-+Jim+Bumgardner+-+Interactive+Puzzles&item_number=Tablet+Puzzles&no_shipping=1&cn=Your%20comments%20are%20welcome&tax=0&currency_code=USD&bn=PP%2dDonationsBF&charset=UTF%2d8&return=http%3A%2F%2Fkrazydad.com%2Finteractive%2Fpuzzles.php%3Fpaypal%3Dsuccess&cancel_return=http%3A%2F%2Fkrazydad.com%2Finteractive%2Fpuzzles.php%3Fpaypal%3Dcancel&amount=5.0",donatePleas=['<a href="'+donateLink+'">Click here</a> to help support this website.',"The puzzles are free, but web hosting isn't!<br><a href=\""+donateLink+'">Click here</a> to help support this website.','Your donations go towards paying my web hosting fees.<br>Want to help? <a href="'+donateLink+'">Click here.</a>','Want to help me pay my Internet bill?  <a href="'+donateLink+'">Make a donation via PayPal</a>. Thank you!!','Your PayPal donations keep KrazyDad alive and ticking.<br>Thank you for <a href="'+donateLink+'">helping out</a>!',"If you've already donated, thank you so much!  I really appreciate your support.<br><a href=\""+donateLink+'">Click here</a> to help support this website.','If you can afford it, please help keep KrazyDad running by <a href="'+donateLink+'">making a donation</a> via PayPal. Thank you!!',"Help me pay for my cat's Internet bill by  <a href=\""+donateLink+'">making a donation</a> via PayPal. Thank you!!',"Help me pay for my puppy's tango lessons by  <a href=\""+donateLink+'">donating with Paypal</a>. Thank you!!','Want to help me repair my broken pencil sharpener? <a href="'+donateLink+'">Put some money in the tip jar with Paypal</a>. Thank you!!'];function DebutSuccessMessage(){var e=(new Date).getTime(),a=Math.floor((e-startTime)/1e3),n=pRec.cookie_data.join("<br>"),t=["Puzzle Solved!",readableElapsed(a)],o=8;if("function"==typeof getMaxPuzzlesPerBook&&(o=getMaxPuzzlesPerBook(pkind)),puzzleNumber>=o){t.push(""),t.push("<em>Congratulations on completing book "+bookNumber+"!</em><p>");if(bookNumber%1==0&&!nextPuz.includes("Interstitial")){var i="/tablet/"+currentPuzzleType.toLowerCase()+"/"+nextPuz,r=currentPuzzleType;"Killer"!=r&&"Comparison"!=r&&"Jigsaw"!=r||(r+=" Sudoku");var s=r,c=currentPuzzleType.toLowerCase();nextPuz="/tablet/tabInterstitial.php?nl="+encodeURIComponent(i)+"&ti="+encodeURIComponent("Thank you for visiting and supporting the site!")+"&pn="+encodeURIComponent(s)+"&pd="+encodeURIComponent(c)+"&in="+encodeURIComponent(r+" puzzles")}}t.push(""),t.push(n),puzzleMessage(t,-1)}function DebutSuccessAnimation(){doSuccessAnimation||(DebutSuccessMessage(),doSuccessAnimation=!(gIsDragging=!1),doSuccessAnimationTS=(new Date).getTime(),SuccessAnimationFrame())}function getKey(e){var a=(e=e||window.event).keyCode,n=String.fromCharCode(a);return generateKey(n,a,e.shiftKey),e.altKey||e.metaKey?1:(e.preventDefault(),e.stopPropagation(),0)}function setError(e){$("#estatus").html(e)}var lastClick,tmh=null;function setStatus(e){$("#pstatus").html(e),""!=e&&(clearTimeout(tmh),tmh=setTimeout("setStatus('');",5e3))}function checkSolutionButton(){checkSolution(!1)}function simulateDblClickTouchEvent(e){var a=e?$(e):{};return!!a[0]&&(a[0].__taps=0,a.bind("touchend",function(e){var a=this;++a.__taps,$d(a.__taps),a.__tabstm||(a.__tabstm=setTimeout(function(){2<=a.__taps&&(a.__taps=0,$(a).trigger("dblclick")),a.__tabstm=0,a.__taps=0},800))}),!0)}var lastClickIdx=-1,gIsDragging=!1;function canvasTouchDrag(e){e.preventDefault(),gIsDragging=!0,canvasClick(e),gIsDragging=!1}function canvasDrag(e){gIsDragging&&(e.preventDefault(),canvasClick(e))}function isError(e){return!(!puzzlePrefs.autoCheckAnswers||"."==mySolution.substr(e,1)||mySolution.substr(e,1)==myAnswer.substr(e,1))||e in errorcells&&errorcells[e]}function clearMarks(e){markcells={},refreshCanvas(),$.cookie(currentPuzzleType.toLowerCase()+"_markcells",JSON.stringify(markcells),{expires:14})}function reinitNewPuzzle(){PushMove(createSweepCommand("clearpuzzle")),$.cookie(currentPuzzleType.toLowerCase()+"_startTime",(new Date).getTime())}function loadAnswer(){PushMove(createSweepCommand("loadanswer"))}function exportImage(){var e=gCanv.toDataURL(),a=window.open();a.document.write("<img src='"+e+"'/>"),a.focus()}function setupCanvas(){gCanv.width=gPuzzleWidth,gCanv.height=gPuzzleHeight,"function"==typeof localSetupCanvas&&localSetupCanvas(),gDC=gCanv.getContext("2d")}var undoQuotaExceeded=!(gUndoHistory={idx:0,moveRecs:[]});function SetUndoVisualState(){var e=0<gUndoHistory.idx,a=gUndoHistory.idx<gUndoHistory.moveRecs.length;$("#tool_undo").toggleClass("disabled",!e),$("#tool_redo").toggleClass("disabled",!a)}function SaveUndoCookie(){}function LoadUndoCookie(){ClearUndoHistory()}function PushMove(e){ApplyMove(e),gUndoHistory.idx<gUndoHistory.moveRecs.length&&(gUndoHistory.moveRecs=gUndoHistory.moveRecs.slice(0,gUndoHistory.idx)),gUndoHistory.moveRecs.push(e),gUndoHistory.idx+=1,refreshCanvas(),SetUndoVisualState(),SaveUndoCookie(),saveSolutionCookies()}function UndoMove(){if(0<gUndoHistory.idx){gUndoHistory.idx-=1;var e=gUndoHistory.moveRecs[gUndoHistory.idx];UnapplyMove(e),$("#ballooncontainer").hide(),doSuccessAnimation=!1,refreshCanvas(),SetUndoVisualState(),SaveUndoCookie(),saveSolutionCookies()}}function RedoMove(){if(gUndoHistory.idx<gUndoHistory.moveRecs.length){var e=gUndoHistory.moveRecs[gUndoHistory.idx];gUndoHistory.idx+=1,ApplyMove(e),refreshCanvas(),SetUndoVisualState(),SaveUndoCookie(),saveSolutionCookies()}}function ClearUndoHistory(){gUndoHistory={idx:0,moveRecs:[]}}
